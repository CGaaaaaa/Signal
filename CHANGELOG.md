# 更新日志

Signal 库的所有重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中
- 完善观察者通知机制
- 添加信号生命周期管理  
- 实现信号调试工具
- 性能优化和基准测试
- 添加更多实用工具函数

## [0.1.0] - 2024-12-XX

### 新增
- ✅ 基础 WritableSignal 实现
  - 创建、读取、设置、更新操作
  - 自动依赖追踪支持
- ✅ ComputedSignal 计算信号
  - 基于依赖自动重新计算
  - 懒加载计算策略
  - 循环依赖检测
- ✅ Effect 副作用系统
  - 响应信号变化执行副作用
  - 自动依赖管理
- ✅ 依赖追踪机制
  - 全局追踪上下文
  - 自动依赖图构建
  - 最小更新保证
- ✅ 批量更新支持
  - `batch()` 函数避免中间计算
  - 优化性能和用户体验
- ✅ untracked 工具
  - 在计算中访问信号但不建立依赖
  - 避免不必要的重新计算
- ✅ 完整的 API 设计
  - 类型安全的泛型支持
  - 简洁易用的接口
  - 符合 MoonBit 语言习惯
- ✅ 测试用例
  - 基础功能测试
  - 复杂场景验证
  - 边界情况处理
- ✅ 示例代码
  - 购物车应用
  - 表单验证
  - 状态机
  - 计算器等实用示例
- ✅ 详细文档
  - API 参考
  - 使用指南
  - 最佳实践
  - 性能考虑

### 技术特性
- 基于依赖图的响应式编程模型
- 自动依赖追踪，无需手动管理
- 最小更新算法，避免重复计算
- 类型安全，充分利用 MoonBit 类型系统
- 内存高效，单文件实现
- 零外部依赖

### 架构设计
- WritableSignal: 可变的信号源
- ComputedSignal: 只读的计算信号
- Effect: 副作用管理
- 全局追踪上下文: 自动依赖管理
- 批量更新队列: 性能优化

### 已知限制
- 观察者通知机制还需完善
- 暂时使用简化的相等性比较
- 部分高级功能待实现

### 参考实现
本版本的设计灵感来源于以下优秀项目：
- Vue.js Reactivity API
- Preact Signals
- OCaml React
- Solid.js Signals

---

## 版本号说明

本项目遵循语义化版本规范：

- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

## 发布流程

1. 更新 CHANGELOG.md
2. 更新 moon.pkg.json 中的版本号
3. 创建 git tag: `git tag v0.1.0`
4. 推送到仓库: `git push origin v0.1.0`
5. 发布到 mooncakes.io